(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{26:function(e,n,t){},47:function(e,n,t){"use strict";t.r(n);var r=t(1),a=t.n(r),c=t(20),u=t.n(c),o=(t(26),t(21)),s=t(4),i=t(0),d=function(e){var n=e.newName,t=e.newNumber,r=e.handleNewName,a=e.handleNewNumber,c=e.addNewName;return Object(i.jsxs)("form",{onSubmit:c,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:n,onChange:r})," ",Object(i.jsx)("br",{}),"number: ",Object(i.jsx)("input",{value:t,onChange:a})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){var n=e.name,t=e.number,r=e.id,a=e.deleteName;return Object(i.jsxs)("li",{children:[n," ",t," ",Object(i.jsx)("button",{onClick:function(){return a(r,n)},children:"Delete"})]},r)},b=function(e){var n=e.persons,t=e.setPersonsToShow;return Object(i.jsxs)(i.Fragment,{children:["filter shown with ",Object(i.jsx)("input",{onChange:function(e){var r=e.target.value,a=n.filter((function(e){return!0===e.name.toLowerCase().includes(r.toLowerCase())}));t(a)}})]})},j=function(e){var n=e.message;return null===n?null:Object(i.jsx)("div",{className:"notification",children:n})},f=t(3),h=t.n(f),m=t(6),p=t(7),O=t.n(p),v="/api/persons",w=function(){var e=Object(m.a)(h.a.mark((function e(){var n,t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O.a.get(v),e.next=3,n;case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(m.a)(h.a.mark((function e(n){var t,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.a.post(v,n),e.next=3,t;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),N=function(){var e=Object(m.a)(h.a.mark((function e(n){var t,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.a.delete("".concat(v,"/").concat(n)),e.next=3,t;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),g=function(){var e=Object(m.a)(h.a.mark((function e(n,t){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=O.a.put("".concat(v,"/").concat(n),t),e.next=3,r;case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),k={getAll:w,create:x,deleteOne:N,update:g},y=function(e){var n=e.people,t=Object(r.useState)(Object(o.a)(n)),a=Object(s.a)(t,2),c=a[0],u=a[1],f=Object(r.useState)(""),h=Object(s.a)(f,2),m=h[0],p=h[1],O=Object(r.useState)(""),v=Object(s.a)(O,2),w=v[0],x=v[1],N=Object(r.useState)(n),g=Object(s.a)(N,2),y=g[0],S=g[1],C=Object(r.useState)(null),T=Object(s.a)(C,2),A=T[0],P=T[1],D=function(e,n){window.confirm("Are you sure you want to delete ".concat(n," ?"))&&k.deleteOne(e).then((function(e){S(y.filter((function(e){return e.name!==n})))}))};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(j,{message:A}),Object(i.jsx)(b,{persons:c,setPersonsToShow:S}),Object(i.jsx)("h2",{children:"add a new"}),Object(i.jsx)(d,{newName:m,newNumber:w,handleNewName:function(e){var n=e.target.value;p(n)},handleNewNumber:function(e){var n=e.target.value;x(n)},addNewName:function(e){e.preventDefault();var n=!1,t=!1;if(c.forEach((function(e){if(e.name===m){if(window.confirm("".concat(e.name," has already been added to the phonebook. replace the old number with the new one?"))){var r={name:e.name,number:w,id:e.id};console.log(r),k.update(e.id,r).then((function(n){P("".concat(e.name," has been updated!")),setTimeout((function(){P(null)}),3e3)})).catch((function(n){P("".concat(e.name," has already been removed from server!")),t=!0,setTimeout((function(){P(null)}),3e3)})),t||S(y.map((function(e){return e.id!==r.id?e:r})))}n=!0}})),!1===n){var r={name:m,number:w};k.create(r).then((function(e){u(c.concat(e)),p(""),x(""),S(c.concat(e)),P("".concat(r.name," has been added!")),setTimeout((function(){P(null)}),3e3)}))}}}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)("ol",{children:y.map((function(e){return Object(i.jsx)(l,{name:e.name,number:e.number,id:e.id,deleteName:D})}))})]})};k.getAll().then((function(e){var n=e;console.log(n,typeof n,e),u.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(y,{people:n})}),document.getElementById("root"))}))}},[[47,1,2]]]);
//# sourceMappingURL=main.b9f5498a.chunk.js.map